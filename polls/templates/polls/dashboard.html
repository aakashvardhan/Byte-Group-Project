{% extends 'polls/dashboardlayout.html' %}
{% load bootstrap4 %}
{% block title %}Dashboard{% endblock %}
{% load static %}


{% block content %}
<div class="container">
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}


{% if user.is_authenticated %}
<h3 align="right"> Welcome {{ user.username }} </h3>
{% else %}
<h3> You are not logged in </h3>
{% endif %}
<div class="jumbotron">
    
{% if latest_question_list %}
<h2 class="display-4">Discover Polls</h2>
<br>
{% if selected_choice %}<h3>You have voted for <strong>{{selected_choice.choice_text}}</strong></h3>
<a href="{% url 'polls:dashboard' %}">Vote again?</a>

{% endif %} 
{% if error_message %}<p style="color:red"><strong>{{ error_message }}</strong></p>{% endif %}
    <ol>
    {% for question in questions.object_list %}
    <li>{{ question.question_text }}</li>
    <br>
    <a href="{% url 'polls:chart' question.id %}" class="btn-primary">CURRENT STATS</a>
    <br><br><br>
    <ul>
        
            <form id="voteform" action="{% url 'polls:vote' question.id %}"  method="post">
                    {% csrf_token %}
                    {% for choice in question.choice_set.all %}
                    <div class="custom-control custom-radio">
                        <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
                        <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br/>
                    {% endfor %}
                    <br>
                    <input type="submit" class="btn btn-primary" value="Vote">
                    </div>
                    
                    
            </form>
    </ul>
    <br>
    {% endfor %}
    
    </ol>
    <nav aria-label="Dashboard">
    <ul class="pagination">
        {% if questions.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1">&laquo; first</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ questions.previous_page_number }}">previous</a></li>
        {% endif %}
       
            <li class="page-item active"><a class="page-link" href="#">Page {{ questions.number }} of {{ questions.paginator.num_pages }}.</a></li>
        

        {% if questions.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ questions.next_page_number }}">next</a></li>
            <li class="page-item"><a class="page-link" href="?page={{ questions.paginator.num_pages }}">last &raquo;</a></li>
        {% endif %}
</ul>
</nav>
{% else %}
    <p>No polls are available.</p>
{% endif %}
</div>
</div>
{% endblock %}